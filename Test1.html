<!DOCTYPE html>
<html lang="fr">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <title>Journal de Mensonges</title>
Â  <style>
Â  Â  body {
Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  background-color: #111;
Â  Â  Â  color: #eee;
Â  Â  Â  padding: 2rem;
Â  Â  Â  max-width: 700px;
Â  Â  Â  margin: auto;
Â  Â  }
Â  Â  .textarea-wrapper {
Â  Â  Â  position: relative;
Â  Â  }
Â  Â  textarea {
Â  Â  Â  width: 100%;
Â  Â  Â  height: 150px;
Â  Â  Â  padding: 1rem;
Â  Â  Â  background-color: #222;
Â  Â  Â  color: #fff;
Â  Â  Â  border: 1px solid #444;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  box-sizing: border-box;
Â  Â  Â  resize: vertical;
Â  Â  Â  font-size: 1rem;
Â  Â  }
Â  Â  .icon-btn {
Â  Â  Â  position: absolute;
Â  Â  Â  bottom: 10px;
Â  Â  Â  width: 24px;
Â  Â  Â  height: 24px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  opacity: 0.6;
Â  Â  Â  transition: opacity 0.3s;
Â  Â  Â  fill: #ccc;
Â  Â  Â  stroke: #ccc;
Â  Â  }
Â  Â  .icon-btn:hover {
Â  Â  Â  opacity: 1;
Â  Â  }
Â  Â  .clear-icon {
Â  Â  Â  right: 40px;
Â  Â  }
Â  Â  .micro-icon {
Â  Â  Â  right: 10px;
Â  Â  }
Â  Â  button {
Â  Â  Â  background-color: #4CAF50;
Â  Â  Â  color: white;
Â  Â  Â  padding: 0.6rem 1.2rem;
Â  Â  Â  margin-top: 1rem;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: background-color 0.3s, transform 0.3s;
Â  Â  }
Â  Â  button:hover {
Â  Â  Â  background-color: #45a049;
Â  Â  Â  transform: scale(1.05);
Â  Â  }
Â  Â  .delete-btn,
Â  Â  .delete-entry-btn,
Â  Â  .delete-all-btn {
Â  Â  Â  background-color: #e74c3c;
Â  Â  }
Â  Â  .delete-btn:hover,
Â  Â  .delete-entry-btn:hover,
Â  Â  .delete-all-btn:hover {
Â  Â  Â  background-color: #c0392b;
Â  Â  }
Â  Â  ul {
Â  Â  Â  list-style: none;
Â  Â  Â  padding: 0;
Â  Â  }
Â  Â  li {
Â  Â  Â  background-color: #1e1e1e;
Â  Â  Â  padding: 1rem;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  margin-top: 1rem;
Â  Â  Â  overflow-x: hidden;
Â  Â  }
Â  Â  li div {
Â  Â  Â  word-wrap: break-word;
Â  Â  Â  overflow-wrap: break-word;
Â  Â  }
Â  Â  .date {
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  color: #aaa;
Â  Â  Â  margin-top: 0.5rem;
Â  Â  }
Â  Â  .delete-entry-btn {
Â  Â  Â  border: none;
Â  Â  Â  color: white;
Â  Â  Â  padding: 0.3rem 0.6rem;
Â  Â  Â  border-radius: 4px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  float: right;
Â  Â  Â  margin-top: 0.5rem;
Â  Â  Â  clear: both;
Â  Â  Â  display: inline-block;
Â  Â  }
Â  </style>
</head>
<body>
Â  <div id="authContainer">
Â  Â  <h2>ğŸ”’ AccÃ¨s sÃ©curisÃ©</h2>
Â  Â  <input type="password" id="passwordInput" placeholder="Mot de passe" />
Â  Â  <button onclick="checkPassword()">Connexion</button>
Â  </div>

Â  <div id="mainApp" style="display: none;">
Â  Â  <h1>ğŸ¤¥ Mon Journal de Mensonges</h1>
Â  Â  <p style="color: #ccc; font-style: italic; margin-top: -1rem;">Coucou Lauryn ğŸ‘‹</p>
Â  Â  <div class="textarea-wrapper">
Â  Â  Â  <textarea id="lieInput" placeholder="Ã‰cris ton mensonge ici..."></textarea>
Â  Â  Â  <svg class="icon-btn clear-icon" onclick="clearText()" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
Â  Â  Â  Â  <path d="M18 6L6 18M6 6l12 12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
Â  Â  Â  </svg>
Â  Â  Â  <svg class="icon-btn micro-icon" onclick="startDictation()" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
Â  Â  Â  Â  <path d="M12 1a3 3 0 00-3 3v7a3 3 0 006 0V4a3 3 0 00-3-3zm5 10a5 5 0 01-10 0H5a7 7 0 0014 0h-2zm-5 10v-3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
Â  Â  Â  </svg>
Â  Â  </div>
Â  Â  <button onclick="saveLie()">ğŸ’¾ Sauvegarder</button>
Â  Â  <button onclick="exportLies()">ğŸ“¥ Exporter</button>
Â  Â  <button class="delete-all-btn" onclick="confirmDeleteAll()">ğŸ—‘ï¸ Supprimer tout</button>
Â  Â  <h2>Mes Mensonges</h2>
Â  Â  <ul id="lieList"></ul>
Â  </div>

Â  <script type="module">
Â  Â  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
Â  Â  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";

Â  Â  const firebaseConfig = {
Â  Â  Â  apiKey: "AIzaSyD5Wk_CLjwkAjY23Rr8GGlI9UgI7sw4tjU",
Â  Â  Â  authDomain: "chat-database-dc941.firebaseapp.com",
Â  Â  Â  projectId: "chat-database-dc941",
Â  Â  Â  storageBucket: "chat-database-dc941.firebasestorage.app",
Â  Â  Â  messagingSenderId: "124627045567",
Â  Â  Â  appId: "1:124627045567:web:581fca056f5b0258508a0a"
Â  Â  };

Â  Â  const app = initializeApp(firebaseConfig);
Â  Â  const db = getFirestore(app);

Â  Â  const PASSWORD = "Lauryn";

Â  Â  function checkPassword() {
Â  Â  Â  const input = document.getElementById("passwordInput").value;
Â  Â  Â  if (input === PASSWORD) {
Â  Â  Â  Â  document.getElementById("authContainer").style.display = "none";
Â  Â  Â  Â  document.getElementById("mainApp").style.display = "block";
Â  Â  Â  Â  loadLies();
Â  Â  Â  } else {
Â  Â  Â  Â  alert("Mot de passe incorrect.");
Â  Â  Â  }
Â  Â  }

Â  Â  const lieInput = document.getElementById("lieInput");
Â  Â  const lieList = document.getElementById("lieList");

Â  Â  async function saveLie() {
Â  Â  Â  const text = lieInput.value.trim();
Â  Â  Â  if (!text) return;
Â  Â  Â  const date = new Date().toLocaleString();
Â  Â  Â  const lies = JSON.parse(localStorage.getItem("lies") || "[]");
Â  Â  Â  lies.unshift({ text, date });
Â  Â  Â  localStorage.setItem("lies", JSON.stringify(lies));
Â  Â  Â  lieInput.value = "";
Â  Â  Â  loadLies();

Â  Â  Â  // Ajout Firestore compteur
Â  Â  Â  try {
Â  Â  Â  Â  await addDoc(collection(db, "compteurs"), { timestamp: new Date() });
Â  Â  Â  Â  console.log("Compteur ajoutÃ© dans Firestore");
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  console.error("Erreur ajout compteur Firestore", e);
Â  Â  Â  }
Â  Â  }

Â  Â  function loadLies() {
Â  Â  Â  const lies = JSON.parse(localStorage.getItem("lies") || "[]");
Â  Â  Â  lieList.innerHTML = "";
Â  Â  Â  lies.forEach((lie, index) => {
Â  Â  Â  Â  const li = document.createElement("li");
Â  Â  Â  Â  li.innerHTML = `
Â  Â  Â  Â  Â  <div>${lie.text}</div>
Â  Â  Â  Â  Â  <div class='date'>${lie.date}</div>
Â  Â  Â  Â  Â  <button class='delete-entry-btn delete-btn' onclick='deleteLie(${index})'>Supprimer</button>
Â  Â  Â  Â  `;
Â  Â  Â  Â  lieList.appendChild(li);
Â  Â  Â  });
Â  Â  }

Â  Â  function deleteLie(index) {
Â  Â  Â  if (!confirm("Tu es sÃ»r de vouloir supprimer ce mensonge ?")) return;
Â  Â  Â  const lies = JSON.parse(localStorage.getItem("lies") || "[]");
Â  Â  Â  lies.splice(index, 1);
Â  Â  Â  localStorage.setItem("lies", JSON.stringify(lies));
Â  Â  Â  loadLies();
Â  Â  }

Â  Â  function confirmDeleteAll() {
Â  Â  Â  if (!confirm("Supprimer TOUS les mensonges ? Cette action est irrÃ©versible.")) return;
Â  Â  Â  localStorage.removeItem("lies");
Â  Â  Â  loadLies();
Â  Â  }

Â  Â  function exportLies() {
Â  Â  Â  const lies = JSON.parse(localStorage.getItem("lies") || "[]");
Â  Â  Â  if (lies.length === 0) {
Â  Â  Â  Â  alert("Aucun mensonge Ã  exporter !");
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  let content = "Journal de Mensonges\n\n";
Â  Â  Â  lies.forEach((lie, index) => {
Â  Â  Â  Â  content += `Mensonge #${lies.length - index}\nDate : ${lie.date}\n${lie.text}\n\n`;
Â  Â  Â  });
Â  Â  Â  const blob = new Blob([content], { type: "text/plain;charset=utf-8" });
Â  Â  Â  const url = URL.createObjectURL(blob);
Â  Â  Â  const a = document.createElement("a");
Â  Â  Â  a.href = url;
Â  Â  Â  a.download = "journal_de_mensonges.txt";
Â  Â  Â  document.body.appendChild(a);
Â  Â  Â  a.click();
Â  Â  Â  document.body.removeChild(a);
Â  Â  Â  URL.revokeObjectURL(url);
Â  Â  }

Â  Â  function clearText() {
Â  Â  Â  lieInput.value = "";
Â  Â  }

Â  Â  function startDictation() {
Â  Â  Â  const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
Â  Â  Â  recognition.lang = 'fr-FR';
Â  Â  Â  recognition.interimResults = true;
Â  Â  Â  recognition.continuous = false;
Â  Â  Â  let finalTranscript = lieInput.value;

Â  Â  Â  recognition.onresult = function (event) {
Â  Â  Â  Â  let interimTranscript = "";
Â  Â  Â  Â  for (let i = event.resultIndex; i < event.results.length; ++i) {
Â  Â  Â  Â  Â  const result = event.results[i];
Â  Â  Â  Â  Â  if (result.isFinal) {
Â  Â  Â  Â  Â  Â  finalTranscript += (finalTranscript && !finalTranscript.endsWith(" ") ? " " : "") + result[0].transcript;
Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  interimTranscript += result[0].transcript;
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  lieInput.value = finalTranscript + (interimTranscript ? " " + interimTranscript : "");
Â  Â  Â  };

Â  Â  Â  recognition.onend = function () {
Â  Â  Â  Â  lieInput.value = finalTranscript.trim();
Â  Â  Â  };

Â  Â  Â  recognition.onerror = function (event) {
Â  Â  Â  Â  alert("Erreur de reconnaissance vocale : " + event.error);
Â  Â  Â  };

Â  Â  Â  recognition.start();
Â  Â  }
Â  </script>
</body>
</html>
